<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In Page</title>
    <!-- CSS 파일 연결 -->
    <link rel="stylesheet" href="assets/css/login.css">
    <script src="https://kit.fontawesome.com/eb9b7241dc.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <!-- Heading -->
        <h1>주차잇슈</h1>
        
        <!-- Links -->
        <ul class="links">
        <li>
            <a href="#" id="signin">개인 회원</a>
        </li>
        <li>
            <a href="#" id="signup">기업회원</a>
        </li>
        <li>
            <a href="#" id="reset">회원가입</a>
        </li>
        </ul>
        
        <!-- Form -->
        <form  action="" method="post">
        <!-- id input -->
        <div class="first-input input__block first-input__block">
            <input type="email" placeholder="Email" class="input" id="email"   />
        </div>
        <!-- password input -->
        <div class="input__block">
            <input type="password" placeholder="Password" class="input" id="password"    />
        </div>
        <!-- repeat password input -->
        <div class="input__block">
            <input type="password" placeholder="Repeat password" class="input repeat__password" id="repeat__password"    />
        </div>
        <!-- 로그인 버튼인데 값이 주어지고 로그인에 성공하면 메인페이지로 이동하게 끔 코드 수정 예정-->
        <button class="signin__btn">
            Sign in
        </button>
        </form>
    <script>
        const loginForm = document.querySelector('form'); // form 요소 선택
        loginForm.addEventListener('submit', (event) => {
            event.preventDefault(); // 기본 폼 제출 동작 방지
            const email = document.getElementById('email').value; 
            const password = document.getElementById('password').value;
            fetch('http://parkingissue_be:5000/api/login', { // Back-end API endpoint로 요청 전송
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password }), // id를 email로 변경
            })
        .then(response => {
            if (response.ok) {
                // 로그인 성공 시 처리 (예: 메인 페이지로 이동)
                window.location.href = 'index.html'; 
            } else {
                // 로그인 실패 시 처리 (예: 에러 메시지 표시)
                alert('로그인 실패');
            }
            })
            .catch(error => {
                console.error('로그인 요청 실패:', error);
            });
        });
    </script>
        <!-- separator -->
        <div class="separator">
        <p>OR</p>
        </div>
        <div class="button-container">
            <button class="kakao__btn">
                <i class="fa fa-kakao"></i> 
                <!-- <img src="img/kakao-logo.png" style="width: 40px; height: 40px;"> -->
            </button>
            <button class="naver__btn">
                <i class="fa fa-naver"></i>
            </button>
        </div>
    </div>
    
    <footer>
        <p>
        SAMDULSHOP : FINAL PROJECT
        </p>
        <p>
            인생한방 :
            <i class="fa fa-github"></i>
        </a>
        </p>
    </footer>
</body>